(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(module,__webpack_exports__,__webpack_require__){"use strict";var startTimestamp=15331644e5;function calculate(numberOfPoints){for(var data=[],i=0;i<numberOfPoints;i++)data.push({timestamp:startTimestamp+Math.abs(Math.floor(1e9*Math.cos(i))),total:Math.abs(Math.sin(i))});return data}__webpack_exports__.a=calculate(1e3);calculate(10)},440:function(module,exports,__webpack_require__){__webpack_require__(179),__webpack_require__(441),module.exports=__webpack_require__(442)},442:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(176),req=__webpack_require__(455);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function(){req.keys().forEach(function(filename){return req(filename)})},module)}.call(this,__webpack_require__(277)(module))},455:function(module,exports,__webpack_require__){var map={"./index.stories.js":456};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){var id=map[req];if(!(id+1)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return id}webpackContext.keys=function(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=455},456:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),d3_time_format__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(34),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(176),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(178),_sampleData__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(113),_src_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(76),stories=(__webpack_require__(475),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("Histogram",module));stories.addDecorator(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.withKnobs);var formatDayFull=Object(d3_time_format__WEBPACK_IMPORTED_MODULE_1__.a)("%e %b'%y");function histogramTooltipBar(bar){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"fdz-css-graph-histogram-bars--tooltip-value"},Math.floor(bar.yValue)," Events"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"fdz-css-graph-histogram-bars--tooltip-dates"},(dateStart=bar.x0,dateEnd=bar.x1,formatStart=formatDayFull(dateStart),formatEnd=formatDayFull(dateEnd),formatStart===formatEnd?formatStart:"".concat(formatStart," - ").concat(formatEnd))));var dateStart,dateEnd,formatStart,formatEnd}stories.add("Basic example",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_5__.a,{data:_sampleData__WEBPACK_IMPORTED_MODULE_4__.a,xAccessor:function(datapoint){return datapoint.timestamp},yAccessor:function(datapoint){return datapoint.total}})}).add("With a custom tooltip",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_5__.a,{data:_sampleData__WEBPACK_IMPORTED_MODULE_4__.a,xAccessor:function(datapoint){return datapoint.timestamp},yAccessor:function(datapoint){return datapoint.total},tooltipBarCustomization:histogramTooltipBar})}).add("With a custom axis formatters",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_5__.a,{data:_sampleData__WEBPACK_IMPORTED_MODULE_4__.a,xAccessor:function(datapoint){return datapoint.timestamp},xAxisFormatter:formatDayFull,yAxisFormatter:function(value){return 0<value?"".concat(value,"$"):""},yAccessor:function(datapoint){return datapoint.total}})}).add("Without the play button",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_5__.a,{data:_sampleData__WEBPACK_IMPORTED_MODULE_4__.a,xAccessor:function(datapoint){return datapoint.timestamp},yAccessor:function(datapoint){return datapoint.total},renderPlayButton:!1})}).add("With a custom a height",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_5__.a,{data:_sampleData__WEBPACK_IMPORTED_MODULE_4__.a,xAccessor:function(datapoint){return datapoint.timestamp},yAccessor:function(datapoint){return datapoint.total},height:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.number)("height (min 150)",300),tooltipBarCustomization:histogramTooltipBar})}).add("With no data",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_5__.a,{data:[],xAccessor:function(datapoint){return datapoint.timestamp},yAccessor:function(datapoint){return datapoint.total},tooltipBarCustomization:histogramTooltipBar})}).add("Change data in order to update histogram",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_5__.a,{data:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_3__.object)("Data",[{timestamp:117007e7,total:100},{timestamp:127007e7,total:23},{timestamp:137007e7,total:100},{timestamp:147007e7,total:23},{timestamp:157007e7,total:100},{timestamp:167007e7,total:23},{timestamp:177007e7,total:400},{timestamp:187007e7,total:200}]),xAccessor:function(datapoint){return datapoint.timestamp},yAccessor:function(datapoint){return datapoint.total},onIntervalChange:function(domain){return console.log(domain)}})})}.call(this,__webpack_require__(277)(module))},475:function(module,exports,__webpack_require__){var content=__webpack_require__(476);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(478)(content,options);content.locals&&(module.exports=content.locals)},476:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(477)(!1)).push([module.i,".fdz-css-graph-histogram {\n  margin-top: 80px; }\n  .fdz-css-graph-histogram-bars rect {\n    fill: rgba(33, 150, 243, 0.4); }\n  .fdz-css-graph-histogram-bars rect:hover {\n    fill: rgba(100, 181, 246, 0.4); }\n  .fdz-css-graph-histogram-bars--tooltip {\n    background-color: #546e7a;\n    width: 100px;\n    padding: 0.3em 0.1em 0.3em 0.1em;\n    margin-left: -50px;\n    margin-top: -50px;\n    text-align: center;\n    z-index: 11;\n    font-family: 'Roboto Mono', Arial, sans-serif; }\n    .fdz-css-graph-histogram-bars--tooltip:after {\n      top: 100%;\n      left: 50%;\n      border: solid transparent;\n      content: \" \";\n      position: absolute;\n      pointer-events: none;\n      border-top-color: #546e7a;\n      border-width: 6px;\n      margin-left: -6px; }\n    .fdz-css-graph-histogram-bars--tooltip-value {\n      color: #90caf9;\n      font-size: 10px;\n      margin-bottom: 2px; }\n    .fdz-css-graph-histogram-bars--tooltip-dates {\n      color: #cfd8dc;\n      font-size: 8px; }\n  .fdz-css-graph-histogram-axis-x {\n    font-family: 'Roboto Mono', Arial, sans-serif;\n    font-size: 7pt; }\n    .fdz-css-graph-histogram-axis-x .domain {\n      stroke: #90a4ae; }\n    .fdz-css-graph-histogram-axis-x text {\n      fill: #90a4ae;\n      text-anchor: right; }\n    .fdz-css-graph-histogram-axis-x line {\n      stroke: #90a4ae; }\n  .fdz-css-graph-histogram-axis-y {\n    font-family: 'Roboto Mono', Arial, sans-serif;\n    font-size: 7pt; }\n    .fdz-css-graph-histogram-axis-y .domain {\n      stroke: transparent; }\n    .fdz-css-graph-histogram-axis-y text {\n      fill: #90a4ae;\n      text-anchor: start; }\n    .fdz-css-graph-histogram-axis-y line {\n      stroke: #90a4ae; }\n  .fdz-css-graph-histogram-zoom {\n    cursor: move;\n    fill: none;\n    pointer-events: all; }\n  .fdz-css-graph-histogram-brush rect.selection {\n    fill: #bbdefb;\n    fill-opacity: 0.3;\n    stroke-width: 0; }\n  .fdz-css-graph-histogram-brush rect.handle {\n    fill: #607d8b;\n    width: 5px;\n    stroke: #607d8b;\n    stroke-width: 1px; }\n  .fdz-css-graph-histogram-density__canvas {\n    position: relative; }\n  .fdz-css-graph-histogram-density__wrapper {\n    display: grid;\n    grid-template-columns: auto auto; }\n  .fdz-css-graph-histogram .fdz-css-cursor-pointer, .fdz-css-graph-histogram .fdz-css-graph-histogram-bars rect:hover, .fdz-css-graph-histogram-bars .fdz-css-graph-histogram rect:hover {\n    cursor: pointer; }\n  .fdz-css-graph-histogram .fdz-css-play-btn {\n    line-height: 1.5;\n    padding: 0 15px;\n    border-radius: 4px;\n    user-select: none;\n    transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n    position: relative;\n    box-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);\n    cursor: pointer;\n    top: -4px;\n    background: transparent;\n    border-color: transparent;\n    color: #bfbfbf;\n    font-size: 18px; }\n    .fdz-css-graph-histogram .fdz-css-play-btn:hover, .fdz-css-graph-histogram .fdz-css-play-btn:active, .fdz-css-graph-histogram .fdz-css-play-btn:focus {\n      background: transparent;\n      border-color: transparent; }\n    .fdz-css-graph-histogram .fdz-css-play-btn:hover {\n      color: #40a9ff; }\n    .fdz-css-graph-histogram .fdz-css-play-btn .anticon {\n      transition: margin-left 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n      line-height: 1;\n      pointer-events: none;\n      vertical-align: -0.125em; }\n      .fdz-css-graph-histogram .fdz-css-play-btn .anticon svg {\n        line-height: 1; }\n",""])},76:function(module,__webpack_exports__,__webpack_require__){"use strict";var classCallCheck=__webpack_require__(6),classCallCheck_default=__webpack_require__.n(classCallCheck),possibleConstructorReturn=__webpack_require__(13),possibleConstructorReturn_default=__webpack_require__.n(possibleConstructorReturn),getPrototypeOf=__webpack_require__(14),getPrototypeOf_default=__webpack_require__.n(getPrototypeOf),createClass=__webpack_require__(7),createClass_default=__webpack_require__.n(createClass),inherits=__webpack_require__(15),inherits_default=__webpack_require__.n(inherits),assertThisInitialized=__webpack_require__(9),assertThisInitialized_default=__webpack_require__.n(assertThisInitialized),defineProperty=__webpack_require__(8),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__(0),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),d3_array=__webpack_require__(11),d3_scale=__webpack_require__(153),d3_selection=__webpack_require__(2),d3_axis=__webpack_require__(348),d3_time=__webpack_require__(4),react_sizeme=__webpack_require__(438),objectSpread=__webpack_require__(16),objectSpread_default=__webpack_require__.n(objectSpread),d3_time_format=__webpack_require__(34),X_AXIS_HEIGHT=18,BUTTON_PADDING=20,DENSITY_CHART_HEIGHT_PX=20,PADDING=10;var formatMillisecond=Object(d3_time_format.a)(".%L"),formatSecond=Object(d3_time_format.a)(":%S"),formatMinute=Object(d3_time_format.a)("%I:%M"),formatHour=Object(d3_time_format.a)("%I %p"),formatDay=Object(d3_time_format.a)("%a %d"),formatWeek=Object(d3_time_format.a)("%b %d"),formatMonth=Object(d3_time_format.a)("%B"),formatYear=Object(d3_time_format.a)("%Y");function isHistogramDataEqual(xAcessor,yAcessor,data1,data2){if(!1===Array.isArray(data1)||!1===Array.isArray(data2))return!1;if(data1.length!==data2.length)return!1;for(var i=0;i<data1.length;i++){if(xAcessor(data1[i])!==xAcessor(data2[i]))return!1;if(yAcessor(data1[i])!==yAcessor(data2[i]))return!1}return!0}function dateToTimestamp(date){return date instanceof Date?date.getTime():date}function calculateChartSizesAndDomain(props,previousData,previousBrushTimeDomain){var _calculateChartsPosit=function(props){var height=props.height,renderPlayButton=props.renderPlayButton,spaceBetweenCharts=props.spaceBetweenCharts,width=props.size.width,playButtonPadding=0;renderPlayButton&&(playButtonPadding=width>PADDING+PADDING?BUTTON_PADDING:0);var histogramHeight=height-DENSITY_CHART_HEIGHT_PX-spaceBetweenCharts;return{histogramChartDimensions:{width:width-PADDING,height:histogramHeight,heightForBars:histogramHeight-X_AXIS_HEIGHT},densityChartDimensions:{width:width-4*PADDING-playButtonPadding,height:DENSITY_CHART_HEIGHT_PX}}}(props),nextState={histogramChartDimensions:_calculateChartsPosit.histogramChartDimensions,densityChartDimensions:_calculateChartsPosit.densityChartDimensions};if(0===props.data.length){var now=dateToTimestamp(Date.now());return objectSpread_default()({},nextState,{data:[],brushTimeDomain:{min:now,max:now},overallTimeDomain:{min:now,max:now}})}if(!isHistogramDataEqual(props.xAccessor,props.yAccessor,props.data,previousData)){nextState=objectSpread_default()({},nextState,{data:props.data});var min=Object(d3_array.f)(props.data,props.xAccessor),max=Object(d3_array.e)(props.data,props.xAccessor)+1;(min!==previousBrushTimeDomain.min||max!==previousBrushTimeDomain.max)&&(nextState=objectSpread_default()({},nextState,{brushTimeDomain:{min:dateToTimestamp(min),max:dateToTimestamp(max)},overallTimeDomain:{min:dateToTimestamp(min),max:dateToTimestamp(max)}}))}return nextState}var d3_zoom=__webpack_require__(347),PLAY_ICON_PATHS=["M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 \n    0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","M719.4 499.1l-296.1-215A15.9 15.9 0 0 0 398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 \n    15.9 0 0 0 0-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"],PlayButton_PlayButton=function(_PureComponent){function PlayButton(){var _getPrototypeOf2,_this;classCallCheck_default()(this,PlayButton);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=possibleConstructorReturn_default()(this,(_getPrototypeOf2=getPrototypeOf_default()(PlayButton)).call.apply(_getPrototypeOf2,[this].concat(args))),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"state",{play:!1}),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_onClickPlay",function(){var _this$props=_this.props,width=_this$props.width,densityChartXScale=_this$props.densityChartXScale,brushDomainMax=_this$props.brushDomainMax,brushDomainMin=_this$props.brushDomainMin,frameStep=_this$props.frameStep,brushedMaxRange=densityChartXScale(brushDomainMax),frameStart=densityChartXScale(brushDomainMin),playEnd=width;_this.frameEnd=frameStart,_this.frameEnd=brushedMaxRange===playEnd?frameStart:brushedMaxRange,_this.setState({play:!0},function(){return _this._playLapseAtInterval(frameStart,playEnd,width*frameStep)})}),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_onClickStop",function(){_this._stopLapse()}),_this}return inherits_default()(PlayButton,_PureComponent),createClass_default()(PlayButton,[{key:"_playFrame",value:function(start,end,step){if(this.frameEnd>=end)this._stopLapse();else{this.frameEnd+step>=end?this.frameEnd=end:this.frameEnd+=step;var domain=[start,this.frameEnd];this.props.moveBrush(domain)}}},{key:"_playLapseAtInterval",value:function(start,end,step){var _this2=this;this.playInterval=setInterval(function(){_this2._playFrame(start,end,step)},this.props.frameDelay)}},{key:"_stopLapse",value:function(){var _this3=this;this.setState({play:!1},function(){return clearInterval(_this3.playInterval)})}},{key:"render",value:function(){var iconElement,onClick=this.state.play?this._onClickStop:this._onClickPlay;return iconElement=this.state.play?react_default.a.createElement("svg",{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"},react_default.a.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 \n64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 \n372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 \n0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"})):react_default.a.createElement("svg",{viewBox:"64 64 896 896",width:"1em",height:"1em",fill:"currentColor"},react_default.a.createElement("path",{d:PLAY_ICON_PATHS[0]}),react_default.a.createElement("path",{d:PLAY_ICON_PATHS[1]})),react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("button",{type:"button",className:"ant-btn fdz-css-play-btn ant-btn-icon-only",onClick:onClick},react_default.a.createElement("i",{className:"anticon anticon-play-circle"},iconElement)))}}]),PlayButton}(react.PureComponent);function drawRect(canvasContext){var obj,x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,y=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,width=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,height=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,options=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;canvasContext.beginPath(),canvasContext.fillStyle=(obj=options,Object(obj)===obj&&options.fillStyle?options.fillStyle:"transparent"),canvasContext.fillRect(x,y,width,height)}defineProperty_default()(PlayButton_PlayButton,"propTypes",{width:prop_types_default.a.number.isRequired,brushDomainMax:prop_types_default.a.number.isRequired,brushDomainMin:prop_types_default.a.number.isRequired,densityChartXScale:prop_types_default.a.func.isRequired,moveBrush:prop_types_default.a.func.isRequired,frameStep:prop_types_default.a.number,frameDelay:prop_types_default.a.number}),defineProperty_default()(PlayButton_PlayButton,"defaultProps",{frameStep:.025,frameDelay:500}),PlayButton_PlayButton.__docgenInfo={description:"PlayButton\n\nRenders a play button that allows to play a time-lapse of the events\nin the histogram.\n\n@author Beatriz Malveiro Jorge (beatriz.jorge@feedzai.com)\n@author Victor Fernandes (victor.fernandes@feedzai.com)\n@author Luis Cardoso (luis.cardoso@feedzai.com)",methods:[{name:"_onClickPlay",docblock:"Handles click on play button. Defines start and end for\nthe domain-lapse and triggers _playLapse to play frames\nat set intervals.\n\n@private",modifiers:[],params:[],returns:null,description:"Handles click on play button. Defines start and end for\nthe domain-lapse and triggers _playLapse to play frames\nat set intervals."},{name:"_onClickStop",docblock:"Handles click on stop button. Will clear interval\nof funtion playInterval playing domain-lapse frames\n\n@private",modifiers:[],params:[],returns:null,description:"Handles click on stop button. Will clear interval\nof funtion playInterval playing domain-lapse frames"},{name:"_playFrame",docblock:"Plays a frame of the domain-lapse. Updates subset of domain\nto be displayed and moves brush to new domain.\n\n@param {Number} start\n@param {Number} end\n@param {Number} step\n@private",modifiers:[],params:[{name:"start",description:null,type:{name:"Number"},optional:!1},{name:"end",description:null,type:{name:"Number"},optional:!1},{name:"step",description:null,type:{name:"Number"},optional:!1}],returns:null,description:"Plays a frame of the domain-lapse. Updates subset of domain\nto be displayed and moves brush to new domain."},{name:"_playLapseAtInterval",docblock:"Plays domain-lapse by calling _playFrame at interval\nto play each frame.\n\n@param {Number} start\n@param {Number} end\n@param {Number} step\n@private",modifiers:[],params:[{name:"start",description:null,type:{name:"Number"},optional:!1},{name:"end",description:null,type:{name:"Number"},optional:!1},{name:"step",description:null,type:{name:"Number"},optional:!1}],returns:null,description:"Plays domain-lapse by calling _playFrame at interval\nto play each frame."},{name:"_stopLapse",docblock:"Stops domain-lapse at current frame. This\nis done by clearing the timeInterval in this.playInterval.\n\n@private",modifiers:[],params:[],returns:null,description:"Stops domain-lapse at current frame. This\nis done by clearing the timeInterval in this.playInterval."}],displayName:"PlayButton",props:{frameStep:{defaultValue:{value:"0.025",computed:!1},type:{name:"number"},required:!1,description:""},frameDelay:{defaultValue:{value:"500",computed:!1},type:{name:"number"},required:!1,description:""},width:{type:{name:"number"},required:!0,description:""},brushDomainMax:{type:{name:"number"},required:!0,description:""},brushDomainMin:{type:{name:"number"},required:!0,description:""},densityChartXScale:{type:{name:"func"},required:!0,description:""},moveBrush:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/DensityChart/PlayButton.js"]={name:"PlayButton",docgenInfo:PlayButton_PlayButton.__docgenInfo,path:"src/DensityChart/PlayButton.js"});var d3_brush=__webpack_require__(439),DensityChart_DensityChart=function(_PureComponent){function DensityChart(props){var _this;return classCallCheck_default()(this,DensityChart),_this=possibleConstructorReturn_default()(this,getPrototypeOf_default()(DensityChart).call(this,props)),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_onResizeBrush",function(){var brushSelection,event=_this._getD3Event();event.sourceEvent&&"zoom"===event.sourceEvent.type||(brushSelection=Array.isArray(event.selection)?event.selection:_this.props.densityChartXScale.range(),_this.props.onDomainChanged(brushSelection))}),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_moveBrush",function(domain){0===_this.props.data.length||Object(d3_selection.f)(_this.densityBrushRef.current).call(_this.brush.move,domain)}),_this.densityChartRef=react_default.a.createRef(),_this.densityBrushRef=react_default.a.createRef(),_this}return inherits_default()(DensityChart,_PureComponent),createClass_default()(DensityChart,[{key:"componentDidMount",value:function(){this.densityChartCanvasContext=this.densityChartRef.current.getContext("2d");var _this$props=this.props,width=_this$props.width,height=_this$props.height,densityChartXScale=_this$props.densityChartXScale;this.brush=Object(d3_brush.a)().extent([[0,0],[width,height]]).on("brush end",this._onResizeBrush),this._updateBrush(),this._moveBrush(densityChartXScale.range()),this._drawDensityChart()}},{key:"componentDidUpdate",value:function(prevProps){var min=this.props.brushDomainMin,max=this.props.brushDomainMax,_this$props2=this.props,densityChartXScale=_this$props2.densityChartXScale,width=_this$props2.width,height=_this$props2.height;if(max>=this.props.overallTimeDomainMax){var delta=this.props.brushDomainMax-this.props.brushDomainMin;min=this.props.overallTimeDomainMax-delta,max=this.props.overallTimeDomainMax}(prevProps.width!==width||prevProps.height!==height)&&this.brush.extent([[0,0],[width,height]]),this._updateBrush(),this._moveBrush([densityChartXScale(min),densityChartXScale(max)]),this._shouldRedrawDensityChart(prevProps)&&this._drawDensityChart()}},{key:"componentWillUnmount",value:function(){clearInterval(this.playInterval),this.brush.on("brush end",null)}},{key:"_getD3Event",value:function(){return d3_selection.b}},{key:"_updateBrush",value:function(){0===this.props.data.length||Object(d3_selection.f)(this.densityBrushRef.current).call(this.brush)}},{key:"_shouldRedrawDensityChart",value:function(prevProps){return function(props,prevProps,propNames){for(var propName,i=0;i<propNames.length;i++)if(propName=propNames[i],prevProps.hasOwnProperty(propName)&&props[propName]!==prevProps[propName])return!0;return!1}(this.props,prevProps,["brushDomainMin","brushDomainMax","data","width","height","densityChartXScale"])}},{key:"_drawDensityChart",value:function(){var _this$props3=this.props,width=_this$props3.width,height=_this$props3.height,densityChartXScale=_this$props3.densityChartXScale,brushDomainMax=_this$props3.brushDomainMax,brushDomainMin=_this$props3.brushDomainMin,xAccessor=_this$props3.xAccessor,data=_this$props3.data,brushDensityChartColor=_this$props3.brushDensityChartColor,brushDensityChartFadedColor=_this$props3.brushDensityChartFadedColor;!function(context,width,height){context.save(),context.clearRect(0,0,width,height)}(this.densityChartCanvasContext,width,height);for(var i=0;i<data.length;++i){var x=xAccessor(data[i]);drawRect(this.densityChartCanvasContext,densityChartXScale(x),0,2,height,{fillStyle:x>=brushDomainMin&&x<brushDomainMax?brushDensityChartColor:brushDensityChartFadedColor})}}},{key:"_renderPlayButton",value:function(){var _this$props4=this.props,width=_this$props4.width,densityChartXScale=_this$props4.densityChartXScale,brushDomainMax=_this$props4.brushDomainMax,brushDomainMin=_this$props4.brushDomainMin,frameStep=_this$props4.frameStep,frameDelay=_this$props4.frameDelay;return _this$props4.renderPlayButton?react_default.a.createElement(PlayButton_PlayButton,{width:width,densityChartXScale:densityChartXScale,brushDomainMin:brushDomainMin,brushDomainMax:brushDomainMax,frameStep:frameStep,frameDelay:frameDelay,moveBrush:this._moveBrush}):null}},{key:"render",value:function(){var leftPadding=0,_this$props5=this.props,width=_this$props5.width,height=_this$props5.height,padding=_this$props5.padding;this.props.renderPlayButton||(leftPadding=2*padding);var densityChartCanvasStyle={left:leftPadding};return react_default.a.createElement("div",{className:"fdz-css-graph-histogram-density__wrapper"},this._renderPlayButton(),react_default.a.createElement("div",{className:"fdz-css-graph-histogram-density",style:{position:"relative"}},react_default.a.createElement("canvas",{ref:this.densityChartRef,className:"fdz-css-graph-histogram-density__canvas",width:width,height:height,style:densityChartCanvasStyle,"aria-label":"Density Chart"}),react_default.a.createElement("svg",{ref:this.densityBrushRef,className:"fdz-css-graph-histogram-brush",width:width,height:height,style:{position:"absolute",left:leftPadding,top:0},alt:"Density Chart Brush"})))}}]),DensityChart}(react.PureComponent);defineProperty_default()(DensityChart_DensityChart,"propTypes",{data:prop_types_default.a.arrayOf(prop_types_default.a.object).isRequired,width:prop_types_default.a.number.isRequired,height:prop_types_default.a.number.isRequired,padding:prop_types_default.a.number.isRequired,overallTimeDomainMax:prop_types_default.a.number,brushDomainMin:prop_types_default.a.number.isRequired,brushDomainMax:prop_types_default.a.number.isRequired,densityChartXScale:prop_types_default.a.func.isRequired,onDomainChanged:prop_types_default.a.func.isRequired,xAccessor:prop_types_default.a.func.isRequired,frameStep:prop_types_default.a.number,frameDelay:prop_types_default.a.number,brushDensityChartColor:prop_types_default.a.string,brushDensityChartFadedColor:prop_types_default.a.string,renderPlayButton:prop_types_default.a.bool}),defineProperty_default()(DensityChart_DensityChart,"defaultProps",{renderPlayButton:!0,overallTimeDomainMax:-1/0,brushDensityChartColor:"rgba(33, 150, 243, 0.2)",brushDensityChartFadedColor:"rgba(176, 190, 197, 0.2)"}),DensityChart_DensityChart.__docgenInfo={description:"DensityChart\n\nPlots a density strip plot for context when brushing and zooming the histogram.\n\n@author Beatriz Malveiro Jorge (beatriz.jorge@feedzai.com)\n@author Victor Fernandes (victor.fernandes@feedzai.com)\n@author Luis Cardoso (luis.cardoso@feedzai.com)",methods:[{name:"_onResizeBrush",docblock:"Handles brush events. It will update this.state.brushedDomain according to the\ntransformation on the event.\n\n@private",modifiers:[],params:[],returns:null,description:"Handles brush events. It will update this.state.brushedDomain according to the\ntransformation on the event."},{name:"_getD3Event",docblock:"Returns the D3 event object\n\nUsed for stubbing in tests.\n\n@returns {Object|null}",modifiers:[],params:[],returns:{description:null,type:{name:"union",elements:[{name:"Object"},null]}},description:"Returns the D3 event object\n\nUsed for stubbing in tests."},{name:"_updateBrush",docblock:"Reapplies the brush\n@private",modifiers:[],params:[],returns:null,description:"Reapplies the brush"},{name:"_moveBrush",docblock:"Moves brush on density strip plot to given domain\n@private\n@param {Array<Number>} domain",modifiers:[],params:[{name:"domain",description:null,type:{name:"Array",elements:[{name:"Number"}]},optional:!1}],returns:null,description:"Moves brush on density strip plot to given domain"},{name:"_shouldRedrawDensityChart",docblock:"Returns whenever it is necessary to re-render the density chart, based on the current and previous\nprops.\n@param {Object} prevProps\n@returns {boolean}",modifiers:[],params:[{name:"prevProps",description:null,type:{name:"Object"},optional:!1}],returns:{description:null,type:{name:"boolean"}},description:"Returns whenever it is necessary to re-render the density chart, based on the current and previous\nprops."},{name:"_drawDensityChart",docblock:"Draws density strip plot in canvas.\n(Using canvas instead of svg for performance reasons as number of datapoints\ncan be very large)\n\n@private",modifiers:[],params:[],returns:null,description:"Draws density strip plot in canvas.\n(Using canvas instead of svg for performance reasons as number of datapoints\ncan be very large)"},{name:"_renderPlayButton",docblock:"Renders the play button that allows to replay a time-lapse of the events.\n@returns {React.Element|null}",modifiers:[],params:[],returns:{description:null,type:{name:"union",elements:[{name:"React.Element"},null]}},description:"Renders the play button that allows to replay a time-lapse of the events."}],displayName:"DensityChart",props:{renderPlayButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},overallTimeDomainMax:{defaultValue:{value:"-Infinity",computed:!1},type:{name:"number"},required:!1,description:""},brushDensityChartColor:{defaultValue:{value:'"rgba(33, 150, 243, 0.2)"',computed:!1},type:{name:"string"},required:!1,description:""},brushDensityChartFadedColor:{defaultValue:{value:'"rgba(176, 190, 197, 0.2)"',computed:!1},type:{name:"string"},required:!1,description:""},data:{type:{name:"arrayOf",value:{name:"object"}},required:!0,description:""},width:{type:{name:"number"},required:!0,description:""},height:{type:{name:"number"},required:!0,description:""},padding:{type:{name:"number"},required:!0,description:""},brushDomainMin:{type:{name:"number"},required:!0,description:""},brushDomainMax:{type:{name:"number"},required:!0,description:""},densityChartXScale:{type:{name:"func"},required:!0,description:""},onDomainChanged:{type:{name:"func"},required:!0,description:""},xAccessor:{type:{name:"func"},required:!0,description:""},frameStep:{type:{name:"number"},required:!1,description:""},frameDelay:{type:{name:"number"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/DensityChart/DensityChart.js"]={name:"DensityChart",docgenInfo:DensityChart_DensityChart.__docgenInfo,path:"src/DensityChart/DensityChart.js"});var Histogram_Histogram=function(_PureComponent){function Histogram(props){var _this;return classCallCheck_default()(this,Histogram),_this=possibleConstructorReturn_default()(this,getPrototypeOf_default()(Histogram).call(this,props)),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_onDensityChartDomainChanged",function(brushSelection){var brushSelectionMin=brushSelection[0],brushSelectionMax=brushSelection[1],brushedDomain=brushSelection.map(_this.densityChartXScale.invert);Object(d3_selection.f)(_this.histogramChartRef.current).call(_this.zoom.transform,d3_zoom.b.scale(_this.state.densityChartDimensions.width/(brushSelectionMax-brushSelectionMin)).translate(-brushSelection[0],0)),_this._updateBrushedDomainAndReRenderTheHistogramPlot(brushedDomain)}),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_onResizeZoom",function(){if(!d3_selection.b.sourceEvent||"brush"!==d3_selection.b.sourceEvent.target.name){var brushedDomain=d3_selection.b.transform.rescaleX(_this.densityChartXScale).domain();if(brushedDomain[1]>=_this.state.overallTimeDomain.max){var brushDomainInterval=brushedDomain[1].getTime()-brushedDomain[0].getTime();brushedDomain[0]=Object(d3_time.c)(_this.state.overallTimeDomain.max-brushDomainInterval),brushedDomain[1]=Object(d3_time.c)(_this.state.overallTimeDomain.max)}_this._updateBrushedDomainAndReRenderTheHistogramPlot(brushedDomain)}}),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_onMouseEnterHistogramBar",function(evt){var index=+evt.currentTarget.getAttribute("dataindex"),currentTarget=evt.currentTarget;_this.setState(function(state){return{showHistogramBarTooltip:!0,currentBar:state.timeHistogramBars[index],selectedBarPosition:currentTarget.getBoundingClientRect()}})}),defineProperty_default()(assertThisInitialized_default()(assertThisInitialized_default()(_this)),"_onMouseLeaveHistogramBar",function(){_this.setState({showHistogramBarTooltip:!1})}),_this.histogramChartRef=react_default.a.createRef(),_this.histogramXAxisRef=react_default.a.createRef(),_this.histogramYAxisRef=react_default.a.createRef(),_this.state=Object.assign({timeHistogramBars:[],selectedBarPosition:{},showHistogramBarTooltip:!1},calculateChartSizesAndDomain(props,[],{max:-1/0,min:1/0})),_this._createScaleAndZoom(),_this}return inherits_default()(Histogram,_PureComponent),createClass_default()(Histogram,null,[{key:"getDerivedStateFromProps",value:function(props,state){if(props.height<100)throw new Error("The minimum height is ".concat(100,"px."));if(0===props.size.width)return null;var nextState=calculateChartSizesAndDomain(props,state.data,state.brushTimeDomain);return 0<Object.keys(nextState).length?nextState:null}}]),createClass_default()(Histogram,[{key:"componentDidMount",value:function(){this._setUpZoomAndChartScales()}},{key:"componentDidUpdate",value:function(prevProps){var hasWidthChanged=prevProps.size.width!==this.props.size.width,hasDataChanged=prevProps.data.length!==this.props.data.length||!isHistogramDataEqual(this.props.xAccessor,this.props.yAccessor,prevProps.data,this.props.data);(hasWidthChanged||hasDataChanged)&&(this._createScaleAndZoom(),this._setUpZoomAndChartScales())}},{key:"componentWillUnmount",value:function(){this.zoom.on("zoom",null)}},{key:"_createScaleAndZoom",value:function(){var _this$state$overallTi=this.state.overallTimeDomain,min=_this$state$overallTi.min,max=_this$state$overallTi.max,_this$state$histogram=this.state.histogramChartDimensions,width=_this$state$histogram.width,height=_this$state$histogram.height;this.densityChartXScale=Object(d3_scale.b)().domain([min,max]).range([0,this.state.densityChartDimensions.width]);var MAX_ZOOM_VALUE=(max-min)/this.props.minZoomUnit;this.zoom=Object(d3_zoom.a)().scaleExtent([1,MAX_ZOOM_VALUE]).translateExtent([[0,0],[width,height]]).extent([[0,0],[width,height]]).on("zoom",this._onResizeZoom)}},{key:"_setUpZoomAndChartScales",value:function(){Object(d3_selection.f)(this.histogramChartRef.current).call(this.zoom),this._updateHistogramChartScales()}},{key:"_updateBrushedDomainAndReRenderTheHistogramPlot",value:function(brushedDomain){var brushedDomainMin=dateToTimestamp(brushedDomain[0]),brushedDomainMax=dateToTimestamp(brushedDomain[1]);if(brushedDomainMin!==this.state.brushTimeDomain.min||brushedDomainMax!==this.state.brushTimeDomain.max){this.setState({brushTimeDomain:{min:brushedDomainMin,max:brushedDomainMax},showHistogramBarTooltip:!1},this._updateHistogramChartScales);var fullDomain=this.densityChartXScale.domain(),isFullDomain=fullDomain[0].getTime()===brushedDomainMin&&fullDomain[1].getTime()===brushedDomainMax;this.props.onIntervalChange([brushedDomainMin,brushedDomainMax],isFullDomain)}}},{key:"_updateHistogramChartScales",value:function(){var _this2=this;this.histogramChartXScale=Object(d3_scale.b)(),this.histogramChartXScale.domain([this.state.brushTimeDomain.min,this.state.brushTimeDomain.max]).range([.02*this.state.histogramChartDimensions.width,.98*this.state.histogramChartDimensions.width]).nice(this.props.defaultBarCount);var maxY,_ref,xAccessor,yAccessor,histogramChartXScale,defaultBarCount,data,timeHistogramBars=(_ref={xAccessor:this.props.xAccessor,yAccessor:this.props.yAccessor,histogramChartXScale:this.histogramChartXScale,defaultBarCount:this.props.defaultBarCount,data:this.props.data},xAccessor=_ref.xAccessor,yAccessor=_ref.yAccessor,histogramChartXScale=_ref.histogramChartXScale,defaultBarCount=_ref.defaultBarCount,data=_ref.data,Object(d3_array.d)().value(xAccessor).domain(histogramChartXScale.domain()).thresholds(histogramChartXScale.ticks(defaultBarCount))(data).map(function(bar){var yValue=bar.reduce(function(sum,curr){return sum+yAccessor(curr)},0);return objectSpread_default()({},bar,{yValue:yValue})}));maxY=0===this.props.data.length?1:Object(d3_array.e)(timeHistogramBars,function(bin){return bin.yValue}),this.histogramChartYScale=Object(d3_scale.a)().domain([0,maxY]).range([this.state.histogramChartDimensions.heightForBars,0]),this.setState({timeHistogramBars:timeHistogramBars},function(){_this2._renderHistogramAxis()})}},{key:"_renderHistogramBars",value:function(timeHistogramBars){var _this3=this;return timeHistogramBars.map(function(bar,index){var _calculatePositionAnd=function(_ref2){var xScale=_ref2.xScale,yScale=_ref2.yScale,heightForBars=_ref2.heightForBars,margin=_ref2.margin,bar=_ref2.bar,_calculateDimensions=function(_ref){var xScale=_ref.xScale,yScale=_ref.yScale,heightForBars=_ref.heightForBars,margin=_ref.margin,bar=_ref.bar;return{width:xScale(bar.x1)-xScale(bar.x0)-margin,height:heightForBars-yScale(bar.yValue)}}({xScale:xScale,yScale:yScale,heightForBars:heightForBars,margin:margin,bar:bar});return{width:_calculateDimensions.width,height:_calculateDimensions.height,x:xScale(bar.x0)+margin/2,y:yScale(bar.yValue)}}({xScale:_this3.histogramChartXScale,yScale:_this3.histogramChartYScale,heightForBars:_this3.state.histogramChartDimensions.heightForBars,margin:_this3.props.barOptions.margin,bar:bar}),width=_calculatePositionAnd.width,height=_calculatePositionAnd.height,x=_calculatePositionAnd.x,y=_calculatePositionAnd.y;if(0>=height||0>=width)return null;var hasTooltipBarCustomatizations="function"==typeof _this3.props.tooltipBarCustomization;return react_default.a.createElement("rect",{key:"histogram-bin-".concat(bar.x0.getTime()),dataindex:index,x:x,y:y,width:width,height:height,onMouseEnter:hasTooltipBarCustomatizations?_this3._onMouseEnterHistogramBar:null,onMouseLeave:hasTooltipBarCustomatizations?_this3._onMouseLeaveHistogramBar:null})})}},{key:"_renderHistogramAxis",value:function(){var histogramXAxisScale=Object(d3_scale.b)().domain([this.histogramChartXScale.invert(0),this.histogramChartXScale.invert(this.state.histogramChartDimensions.width)]).range([0,this.state.histogramChartDimensions.width]),histogramXAxis=Object(d3_axis.a)(histogramXAxisScale).tickValues(this.histogramChartXScale.ticks(this.props.defaultBarCount/3)).tickFormat(this.props.xAxisFormatter);Object(d3_selection.f)(this.histogramXAxisRef.current).call(histogramXAxis);var histogramYAxis=Object(d3_axis.b)(this.histogramChartYScale).ticks(this.props.yAxisTicks).tickSize(0).tickFormat(this.props.yAxisFormatter);Object(d3_selection.f)(this.histogramYAxisRef.current).call(histogramYAxis)}},{key:"_renderBarTooltip",value:function(currentBar){var tooltipStyle={position:"fixed",left:"".concat(this.state.selectedBarPosition.left+this.state.selectedBarPosition.width/2,"px"),top:"".concat(this.state.selectedBarPosition.top- -10,"px")};if("function"!=typeof this.props.tooltipBarCustomization)return null;var tooltipElement=this.props.tooltipBarCustomization(currentBar);return react_default.a.createElement("div",{className:"fdz-css-graph-histogram-bars--tooltip",style:tooltipStyle},tooltipElement)}},{key:"_renderHistogramChart",value:function(){var _this$state=this.state,histogramChartDimensions=_this$state.histogramChartDimensions,timeHistogramBars=_this$state.timeHistogramBars,_this$props=this.props,spaceBetweenCharts=_this$props.spaceBetweenCharts,size=_this$props.size;return react_default.a.createElement("svg",{ref:this.histogramChartRef,className:"fdz-js-graph-histogram fdz-css-graph-histogram-chart",width:size.width,height:histogramChartDimensions.height,style:{marginBottom:spaceBetweenCharts}},react_default.a.createElement("g",{className:"fdz-css-graph-histogram-bars"},this._renderHistogramBars(timeHistogramBars)),react_default.a.createElement("g",{ref:this.histogramXAxisRef,className:"fdz-js-graph-histogram-axis-x fdz-css-graph-histogram-axis-x",transform:"translate(0, ".concat(histogramChartDimensions.heightForBars,")")}),react_default.a.createElement("g",{ref:this.histogramYAxisRef,className:"fdz-js-graph-histogram-axis-y fdz-css-graph-histogram-axis-y",transform:"translate(".concat(3,", ").concat(3,")")}))}},{key:"_renderDensityChart",value:function(){var _this$props2=this.props,frameStep=_this$props2.frameStep,frameDelay=_this$props2.frameDelay,xAccessor=_this$props2.xAccessor,spaceBetweenCharts=_this$props2.spaceBetweenCharts,brushDensityChartColor=_this$props2.brushDensityChartColor,brushDensityChartFadedColor=_this$props2.brushDensityChartFadedColor,renderPlayButton=_this$props2.renderPlayButton,data=_this$props2.data;return react_default.a.createElement(DensityChart_DensityChart,{width:this.state.densityChartDimensions.width,height:this.state.densityChartDimensions.height,padding:PADDING,brushDomainMin:this.state.brushTimeDomain.min,brushDomainMax:this.state.brushTimeDomain.max,overallTimeDomainMax:this.state.overallTimeDomain.max,frameStep:frameStep,frameDelay:frameDelay,xAccessor:xAccessor,spaceBetweenCharts:spaceBetweenCharts,brushDensityChartColor:brushDensityChartColor,brushDensityChartFadedColor:brushDensityChartFadedColor,densityChartXScale:this.densityChartXScale,renderPlayButton:renderPlayButton&&0<data.length,data:data,onDomainChanged:this._onDensityChartDomainChanged})}},{key:"render",value:function(){return react_default.a.createElement("div",{className:"fdz-css-graph-histogram"},this.state.showHistogramBarTooltip?this._renderBarTooltip(this.state.currentBar):null,this._renderHistogramChart(),this._renderDensityChart())}}]),Histogram}(react.PureComponent);defineProperty_default()(Histogram_Histogram,"propTypes",{data:prop_types_default.a.array.isRequired,size:prop_types_default.a.shape({width:prop_types_default.a.number.isRequired}).isRequired,defaultBarCount:prop_types_default.a.number,xAccessor:prop_types_default.a.func.isRequired,xAxisFormatter:prop_types_default.a.func,yAccessor:prop_types_default.a.func.isRequired,spaceBetweenCharts:prop_types_default.a.number,barOptions:prop_types_default.a.object,yAxisTicks:prop_types_default.a.number,yAxisFormatter:prop_types_default.a.func,brushDensityChartColor:prop_types_default.a.string,brushDensityChartFadedColor:prop_types_default.a.string,tooltipBarCustomization:prop_types_default.a.func,onIntervalChange:prop_types_default.a.func,minZoomUnit:prop_types_default.a.number,frameStep:prop_types_default.a.number,frameDelay:prop_types_default.a.number,renderPlayButton:prop_types_default.a.bool}),defineProperty_default()(Histogram_Histogram,"defaultProps",{data:[],height:100,padding:10,defaultBarCount:18,barOptions:{margin:1},spaceBetweenCharts:10,yAxisTicks:3,xAxisFormatter:function(date){return(Object(d3_time.g)(date)<date?formatMillisecond:Object(d3_time.d)(date)<date?formatSecond:Object(d3_time.b)(date)<date?formatMinute:Object(d3_time.a)(date)<date?formatHour:Object(d3_time.f)(date)<date?Object(d3_time.j)(date)<date?formatDay:formatWeek:Object(d3_time.k)(date)<date?formatMonth:formatYear)(date)},yAxisFormatter:function(value){return 0<value&&Number.isInteger(value)?value:""},tooltipBarCustomization:null,onIntervalChange:function(){},minZoomUnit:1e3,renderPlayButton:!0});var src_Histogram_Histogram=Object(react_sizeme.withSize)()(Histogram_Histogram);Histogram_Histogram.__docgenInfo={description:'Histogram\n\nPlots an histogram with zoom and brush features on the x domain.\nAlso plots a density strip plot for context when brushing and zooming the histogram.\n\n@author Beatriz Malveiro Jorge (beatriz.jorge@feedzai.com)\n@author Victor Fernandes (victor.fernandes@feedzai.com) ("productization" process)\n@author Luis Cardoso (luis.cardoso@feedzai.com)',methods:[{name:"getDerivedStateFromProps",docblock:null,modifiers:["static"],params:[{name:"props",type:null},{name:"state",type:null}],returns:null},{name:"_onDensityChartDomainChanged",docblock:"Handles a domain change in the density chart.\n\n@param {Array} brushSelection\n@private",modifiers:[],params:[{name:"brushSelection",description:null,type:{name:"Array"},optional:!1}],returns:null,description:"Handles a domain change in the density chart."},{name:"_onResizeZoom",docblock:"Handles resizing and zoom events. This functions triggers whenever a zoom or brush\naction is performed on the histogram.\nSets new domain for histogram bar chart\nWill call _updateHistogramScales after to set scales and then redraw plots.\n\n@private",modifiers:[],params:[],returns:null,description:"Handles resizing and zoom events. This functions triggers whenever a zoom or brush\naction is performed on the histogram.\nSets new domain for histogram bar chart\nWill call _updateHistogramScales after to set scales and then redraw plots."},{name:"_onMouseEnterHistogramBar",docblock:"Handles the mouse entering an histogram bar.\n\n@param {Object} evt\n@private",modifiers:[],params:[{name:"evt",description:null,type:{name:"Object"},optional:!1}],returns:null,description:"Handles the mouse entering an histogram bar."},{name:"_onMouseLeaveHistogramBar",docblock:"Handles the mouse leaving an histogram bar.\n@private",modifiers:[],params:[],returns:null,description:"Handles the mouse leaving an histogram bar."},{name:"_createScaleAndZoom",docblock:"Creates the density chart x axis scale and the histogram zoom.\n@private",modifiers:[],params:[],returns:null,description:"Creates the density chart x axis scale and the histogram zoom."},{name:"_setUpZoomAndChartScales",docblock:"Sets up the zoom and the chart scales.\n@private",modifiers:[],params:[],returns:null,description:"Sets up the zoom and the chart scales."},{name:"_updateBrushedDomainAndReRenderTheHistogramPlot",docblock:"Check if brushed domain changed and if so, updates the component state\nand calls prop function for interval change.\n\n@param {Array<Number>} brushedDomain\n@private",modifiers:[],params:[{name:"brushedDomain",description:null,type:{name:"Array",elements:[{name:"Number"}]},optional:!1}],returns:null,description:"Check if brushed domain changed and if so, updates the component state\nand calls prop function for interval change."},{name:"_updateHistogramChartScales",docblock:"Defines X and Y scale for histogram bar chart and creates bins for histogram\nChecks if plot is timebased and sets X axis accordingly.\n\n@private",modifiers:[],params:[],returns:null,description:"Defines X and Y scale for histogram bar chart and creates bins for histogram\nChecks if plot is timebased and sets X axis accordingly."},{name:"_renderHistogramBars",docblock:"Renders histogram bars from array of histogram bins.\n\n@param {Array} timeHistogramBars\n@returns {Array.<React.Element>|null}\n@private",modifiers:[],params:[{name:"timeHistogramBars",description:null,type:{name:"Array"},optional:!1}],returns:{description:null,type:{name:"union",elements:[{name:"Array",elements:[{name:"React.Element"}]},null]}},description:"Renders histogram bars from array of histogram bins."},{name:"_renderHistogramAxis",docblock:"This function will render the X and Y axis. This means it will set their scales\nas well as how many ticks, their respective positions and how their text should\nbe formatted.\n\n@private",modifiers:[],params:[],returns:null,description:"This function will render the X and Y axis. This means it will set their scales\nas well as how many ticks, their respective positions and how their text should\nbe formatted."},{name:"_renderBarTooltip",docblock:"Renders tooltip corresponding to an histogram bin.\nReceives an object with all the data of the bin and gets corresponding\nbar element. Then calls the prop function histogramBarTooltipFormatter\nto get the tooltip element to be rendered. Updates states with this element\nand toggles showHistogramBarTooltip.\n\n@param {Object} currentBar\n@private",modifiers:[],params:[{name:"currentBar",description:null,type:{name:"Object"},optional:!1}],returns:null,description:"Renders tooltip corresponding to an histogram bin.\nReceives an object with all the data of the bin and gets corresponding\nbar element. Then calls the prop function histogramBarTooltipFormatter\nto get the tooltip element to be rendered. Updates states with this element\nand toggles showHistogramBarTooltip."},{name:"_renderHistogramChart",docblock:"Renders the histogram chart (i.e., the bars and the axis).\n@returns {React.Element}",modifiers:[],params:[],returns:{description:null,type:{name:"React.Element"}},description:"Renders the histogram chart (i.e., the bars and the axis)."},{name:"_renderDensityChart",docblock:"Renders the density chart.\n@returns {React.Element}",modifiers:[],params:[],returns:{description:null,type:{name:"React.Element"}},description:"Renders the density chart."}],displayName:"Histogram",props:{data:{defaultValue:{value:"[]",computed:!1},type:{name:"array"},required:!1,description:""},height:{defaultValue:{value:"MIN_TOTAL_HEIGHT",computed:!0},required:!1},padding:{defaultValue:{value:"10",computed:!1},required:!1},defaultBarCount:{defaultValue:{value:"18",computed:!1},type:{name:"number"},required:!1,description:""},barOptions:{defaultValue:{value:"{\n    margin: 1\n}",computed:!1},type:{name:"object"},required:!1,description:""},spaceBetweenCharts:{defaultValue:{value:"10",computed:!1},type:{name:"number"},required:!1,description:""},yAxisTicks:{defaultValue:{value:"3",computed:!1},type:{name:"number"},required:!1,description:""},xAxisFormatter:{defaultValue:{value:"multiDateFormat",computed:!0},type:{name:"func"},required:!1,description:""},yAxisFormatter:{defaultValue:{value:"histogramDefaultYAxisFormatter",computed:!0},type:{name:"func"},required:!1,description:""},tooltipBarCustomization:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:""},onIntervalChange:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},minZoomUnit:{defaultValue:{value:"1000",computed:!1},type:{name:"number"},required:!1,description:""},renderPlayButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},size:{type:{name:"shape",value:{width:{name:"number",required:!0}}},required:!0,description:""},xAccessor:{type:{name:"func"},required:!0,description:""},yAccessor:{type:{name:"func"},required:!0,description:""},brushDensityChartColor:{type:{name:"string"},required:!1,description:""},brushDensityChartFadedColor:{type:{name:"string"},required:!1,description:""},frameStep:{type:{name:"number"},required:!1,description:""},frameDelay:{type:{name:"number"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Histogram/Histogram.js"]={name:"Histogram",docgenInfo:Histogram_Histogram.__docgenInfo,path:"src/Histogram/Histogram.js"});__webpack_exports__.a=src_Histogram_Histogram}},[[440,2,4]]]);
//# sourceMappingURL=iframe.8ff6c74da93c838325a4.bundle.js.map